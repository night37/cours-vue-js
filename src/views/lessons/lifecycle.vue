<template>
    <div class="flex justify-center my-8">
        <div class="card w-full max-w-3xl bg-base-200 shadow-xl p-6">
            <h1 class="text-3xl font-bold text-primary mb-6 text-center">
                ğŸ“š Comprendre le cycle de vie des composants Vue
            </h1>

            <!-- Explication gÃ©nÃ©rale -->
            <div class="alert alert-info mb-6">
                <span>
                    Dans Vue, chaque composant a un <strong>cycle de vie</strong> : il naÃ®t, il vit, puis il est
                    dÃ©truit.
                    Comprendre ce cycle est essentiel pour savoir oÃ¹ placer son code.
                </span>
            </div>

            <!-- Liste des Ã©tapes -->
            <h2 class="text-xl font-semibold text-secondary mb-4">
                ğŸ”„ Principales Ã©tapes du cycle de vie :
            </h2>
            <ul class="steps steps-vertical lg:steps-horizontal">
                <li class="step step-primary">CrÃ©ation (setup / beforeCreate / created)</li>
                <li class="step step-primary">Montage (onMounted)</li>
                <li class="step">Mise Ã  jour (onUpdated)</li>
                <li class="step">DÃ©montage (onBeforeUnmount / onUnmounted)</li>
            </ul>

            <div class="divider my-6"></div>

            <!-- Exemple live -->
            <h2 class="text-xl font-semibold text-secondary mb-4">
                âš¡ Exemple interactif
            </h2>
            <p class="mb-4">
                Ci-dessous, un exemple pratique oÃ¹ lâ€™on observe les logs dans la console pendant
                les diffÃ©rentes Ã©tapes du cycle de vie.
            </p>

            <div class="bg-base-100 p-4 rounded shadow">
                <p class="mb-2">
                    <span class="font-bold">Compteur :</span> {{ counter }}
                </p>
                <button class="btn btn-primary btn-sm" @click="counter++">
                    â• IncrÃ©menter
                </button>
                <button class="btn btn-error btn-sm ml-2" @click="destroyComponent">
                    âŒ DÃ©truire le composant
                </button>
            </div>

            <div class="divider my-6"></div>

            <!-- Pourquoi câ€™est important -->
            <h2 class="text-xl font-semibold text-secondary mb-4">
                ğŸ’¡ Pourquoi câ€™est important ?
            </h2>
            <div class="grid gap-2">
                <p class="p-2 rounded bg-base-100 shadow-sm">
                    ğŸ¯ Charger des donnÃ©es (API) dans <span class="font-bold">onMounted()</span>
                </p>
                <p class="p-2 rounded bg-base-100 shadow-sm">
                    ğŸ—‘ï¸ LibÃ©rer des ressources dans <span class="font-bold">onBeforeUnmount()</span>
                </p>
                <p class="p-2 rounded bg-base-100 shadow-sm">
                    ğŸ–¥ï¸ Mettre Ã  jour lâ€™UI dans <span class="font-bold">onUpdated()</span>
                </p>
            </div>
        </div>
    </div>
</template>

<script setup>
import { ref, onMounted, onUpdated, onBeforeUnmount, onUnmounted } from 'vue'

const counter = ref(0)

// Exemple d'utilisation du cycle de vie :
onMounted(() => {
    console.log('âœ… Le composant est montÃ© : on peut faire des appels API.')
})

onUpdated(() => {
    console.log('ğŸ”„ Le composant vient dâ€™Ãªtre mis Ã  jour : counter =', counter.value)
})

onBeforeUnmount(() => {
    console.log('âš ï¸ Le composant va Ãªtre dÃ©montÃ© : on peut nettoyer des timers ou listeners.')
})

onUnmounted(() => {
    console.log('ğŸ—‘ï¸ Le composant est dÃ©montÃ© : plus de ressources en mÃ©moire.')
})

// Exemple pour dÃ©truire le composant dynamiquement
const destroyComponent = () => {
    // Ici, on simule la destruction en rechargant la page ou en changeant de route
    location.reload()
}
</script>

<style scoped>
/* Optionnel : styles custom */
</style>